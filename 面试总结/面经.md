# 面经
## 招银科技（45min）
1. 百万级 Mysql 分页查询 1000001 到 1000010 的数据，必须使用sql查询，怎么实现高效查询？
2. 项目中遇到了慢SQL是怎么排查的？
3. 线程池核心参数，什么时候会创建新的线程？阻塞队列是做什么的？如果阻塞队列满了，且达到最大线程数，会发生什么？拒绝策略有哪些？
    > [线程池知识总结](/Java/线程池.md)
4. 讲一下Java内存模型 JMM。
5. 分布式系统中，定时任务重复执行怎么办，我看你们用到了xxljob，这个是做什么的？
6. 谈谈你对synchronized关键字的理解。
7. 为什么可以使用redis做锁？
8. 有了基本类型为什么还有包装类，为什么泛型不能使用基本数据类型？
    > [Java基础知识包装类部分](/Java/基础/Java核心知识.md)
9. 遇到过直接内存溢出的问题吗？堆内存溢出呢？怎么排查并解决？实际工作中碰到过吗？
10. 怎么理解新生代、老年代？
11. 你是怎么理解大模型的，在实际工作中能起到什么作用吗？
12. 怎么理解 DDD 架构，为什么要使用 DDD 架构呢？
13. 除了RocketMQ还接触过哪些消息队列，工作中怎么做技术选型？工作中什么时候会考虑使用消息队列呢？
14. protected 修饰符用过吗？

---
## 快牛智联（30min）
1. spring怎么解决循环依赖？三级缓存是什么？还有什么方法可以解决？

---
## 成都谐云（40min）
1. 线程池底层怎么实现的，看过没有？
2. JUC 平时用的多吗？原子类底层是怎么实现的呢？
3. 讲讲你对循环依赖的了解，三级缓存解决循环依赖这部分的源码你看过吗？
4. spring源码看过吗？
5. JVM的内存模型简单说一下，G1垃圾回收器了解过吗，简单说下。
6. RocketMQ怎么保证不重复消费，不丢消息？
7. 千万级数据导出，忘记加查询条件了，导致OOM了，怎么解决？（场景）
8. 对数据库锁的了解、对数据库事务、MVCC的了解。
9. 让你设计一个像Redis一样的数据库，你怎么设计，怎么保证高并发场景下安全呢？
10. 你怎么写一个快照读语句？
11. 锁了解哪些，用过哪些？
12. 频繁FullGC怎么排查？
13. Mysql 索引类型有哪些，有什么区别？
14. Bean的生命周期简单描述一下。
15. docker、k8s用的多吗？

## 阿里（20min）
1. 左连接、右连接，输出结果。
2. Mysql 中有一个百万级别的数据表，不添加条件，仅针对 用户id 做查询，怎么实现 10wQPS 的查询，怎么实现 100wQPS 的查询？如果存在热点数据怎么办?redis能达到多少QPS了解过吗，容量了解过吗，面试官觉得百万级用户热点数据redis撑不住。
3. 指定一个方法，入参是bean的名称，怎么实现一个方法去获取bean对象。
4. rpc框架了解哪些呢？
5. dubbo调用的流程是怎么样的，调用方应该做哪些操作呢？


## 元保科技（40min）
1. int 和 Integer 的区别，给了示例判断输出。
    > 注意 new Integer() 出来的对象，不是从常量池里取
2. JDK1.8 HashMap的变化？扩容时机，缩容时机？为什么用红黑树，不用二叉平衡树？为什么不用跳表？
3. 多线程用过吗？说说线程池的核心参数和工作原理？
4. 线程池和mq的使用区别有什么？（当时提到了mq可以在不同服务间使用，面试官没有继续追问）
    > 这里提了一个场景：项目上线时是滚动上线，当一个pod启起来后，另一个pod重启时，线程池中的任务正在进行，导致了数据不一致，怎么解决这个问题？这个问题到最后居然是引导用mq解决，我说了一下rocketmq中consumer的回调，broker没收到ack会重新推送的流程，很神奇，没get到面试官的点
    > 
    > 且这部分面试官一直质疑拒绝策略的选择，提及了一些场景，如大量请求打进服务端，选用CallerRunsPolicy,直接阻塞主线程怎么办，我说这种场景应该考虑接mq，换位抛异常的拒绝策略去处理，可以考虑发一个延时MQ解决
    > 
    > 很不解当时面试官为什么要强行拉线程池与MQ pk，他举例的场景，如果不接mq，光凭线程池也搞不了。
5. 死锁的四个必要条件，解决方案？
    > 这里面试官硬性要求背诵四个必要条件，非常死板。我举了平时预防死锁的一些方案，和会发生死锁的一些场景，但面试官质疑说，“你连四个必要条件都不知道，怎么解决死锁？”，我很疑惑为什么面试官要这么问？但相关操作系统知识需要补充一下
6. 序列化和反序列化说一下，平时用过哪些？（需整理）


## 字节一面 （加笔试 50 min）
1. 挖项目，招聘系统，解析简历部分，问为什么当时要考虑使用rocketmq解耦。
2. rocketmq怎么保证不重复消费问题
3. 了解过kafka吗，什么时候用kafka，什时候用rocketmq呢？
4. 你刚说到了 kafka 的高吞吐量，你了解过他的实现原理吗？
5. 线程池的基本参数和执行流程，线程的状态有哪些？
6. mysql为什么考虑使用b+树作为索引
7. 索引失效的场景，列举一下
8. mysql默认事务隔离级别是什么，这种隔离级别解决幻读问题了吗？
> 当时说没有完全解决，说了一种情况，快照读没有读到数据 -> 直接update，发现update成功，这种很反逻辑的幻读行为，当时面试官比较疑惑，引出了下面间隙锁的问题。
9. 知道什么是间隙锁吗，间隙锁是用来做什么的呢？
10. hashmap是线程不安全的，你知道的线程安全的集合有哪些呢？concurrenthashmap和hashtable有什么区别吗？
> 不太了解hashtable，答的不好，当时说concurrenthashmap的源码时记成 原子类（AtomicInteger）的源码了，回答的是volatile + CAS 实现，没说出synchronized 来。面试官追问synchronized，引出了下面的问题
11. 你刚说到了volatile关键字，这个关键字有什么作用呢？concurrenthashmap中用到synchronized关键字了吗？
12. 你大概描述一下 java 的容器吧，我想看看你对java整体的一个了解程度。
> 当时没有理解这里的容器指什么，后面询问面试官后，是想让我说一下类似 集合框架 这种，谁继承谁，谁的同级有什么别的类这样一块内容的总体框架，当时大概说了下 集合 和 异常，集合那块儿回答不太好。

手撕代码（双指针）
给定一个数组，输出满足条件的连续元素的最小长度，要求时间复杂度小于 $O(n^2)$。
> 不能 debug 没ac

## 58同城
1. 如果你们上传简历，可能由于网络卡顿等原因，导致重复点击，你们是怎么处理并预防的呢？
2. 遇到的项目难点有哪些？
3. redis主从架构下，主写从读，如果注解点中的key过期了，还没同步到从节点，那从节点现在能读到对应的数据吗？
4. 了解redis的过期策略吗？说说LRU底层的数据结构。
5. 创建了很多个子线程，子线程的异常在主线程中可以捕获到吗？
6. 多次执行start()方法会怎样？
7. mysql主从架构下，有一个表，有个字段是创建时间，怎么防止主从同步时该字段发生时间偏差？
8. 说一下jvm内存模型？简述一个对象在堆空间的gc过程？新生代内存比例是怎么划分的。


## 杭州有赞 （25min）
1. 看项目里用了completablefuture,为什么用comletablefuture?completablefuture有什么问题知道吗？他们公司用这个撑不住（大概是这个意思）
2. rocketmq消息丢失我们是怎么预防的？我们是做同步发送还是异步发送？异步发送应该会有丢失问题，是怎么解决的？
    > 当时回答的是broker 的ack确认机制，后面问是同步还是异步的，说异步的应该会有丢失问题，懵逼了。
3. 招聘系统的redis做分布式锁生产环境遇到过问题吗？为什么不考虑使用redisson呢？
4. 平时用redis什么数据结构比较多啊？字符串底层的数据结构是什么啊？为什么用SDS呢，不用原生的字符串呢？
5. 怎么理解mysql事务的？用得最多的是哪个？怎么保证一致性呢？当时为什么不用RC呢？知道RC和RR的优劣吗？现在也有些公司为了追求一点性能会考虑使用RC的。
    > acid，深入回答一致性，当时说了RR隔离级别下，mvcc解决幻读，然后问到了RC
6. 系统中解析简历的延时队列是怎么实现的。